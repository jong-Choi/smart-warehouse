# SVG 이동 박스 렌더링 성능 최적화 원리

## 문제점

- 기존에는 매 프레임마다 circles.map으로 `<image>` 노드의 x, y 속성을 직접 변경하여 위치를 갱신함
- 이 방식은 매 프레임마다 모든 `<image>` 노드가 새롭게 렌더링되어 DOM 트리 변경 비용이 큼
- 박스 개수가 많아질수록 브라우저의 렌더링 성능 저하가 발생

## 최적화 원리

1. **transform 속성만 변경**

   - 각 박스의 위치를 `<g>` 그룹의 `transform` 속성(`translate(x, y)`)으로만 변경
   - `<image>` 노드 자체는 그대로 두고, 위치만 transform으로 이동시켜 DOM 구조 변경을 최소화
   - 브라우저는 transform 변경에 최적화되어 있어, repaint/reflow 비용이 매우 적음

2. **컴포넌트 메모이제이션**

   - 이동 박스를 `MovingBox`라는 React.memo로 감싼 컴포넌트로 분리
   - circles 배열이 바뀌지 않는 한, 각 박스의 컴포넌트는 불필요하게 리렌더되지 않음
   - React의 diffing 비용도 줄어듦

3. **불필요한 상태/렌더링 최소화**
   - 위치 계산만 바뀌고, 박스의 id나 개수 변화가 없으면 DOM 노드가 재생성되지 않음
   - React의 key 속성으로 각 박스의 identity를 명확히 유지

## 효과

- 프레임당 DOM 변경량이 크게 줄어들어, 박스가 많아져도 렌더링 성능이 유지됨
- 애니메이션이 부드럽고, CPU/GPU 사용량이 감소함
- 대규모 SVG 시각화에서 필수적인 최적화 패턴

---

**핵심:**

- "위치만 transform으로 바꾼다!"
- "컴포넌트는 React.memo로 감싼다!"
